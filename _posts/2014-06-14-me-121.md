---
layout: post
title: "Feedback Control: Active Car Suspension System"
description: "ME 121- Feedback Control Project"
modified: 2016-08-09
tags: [Mechanical Engineering, project]
categories: [Mechanical Engineering]
image:
  background: grey_wash_wall.png
  feature: /ME121/feedback_cover.jpg
---
<style>
hr{
	border: 0;
    height: 1px;
    background-image: linear-gradient(to right, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.75), rgba(0, 0, 0, 0));
}
</style>

### Objectives
Design a compensator for an active car suspension system using Matlab Linear Systems Toolbox and Simulink.

<!-- more -->

### Description of the System
The active suspension control system essentially measures the displacement of the wheel and vehicle position reltive to the "desired" ones, computes how to compensate for this error, and actuates with hydropneumatic or electromagnetic suspensions.  The **active** element is represented by the circle producing a force F.  **Our overall goal** is to **automatically determine** F to minimize the effects of the disturbance w (rough terrain) on the wheel and chasis displacement.<br/>
You will design and activate suspension sysstem for a quarter car body and wheel assembly model using frequency domain design techniques.  You will have to ensure passenger comfort by minimizing the amplitude and duration of oscillations in the car response to terrain dissturbances.

| Subsystem | Masses [kg] | Spring constants [N/m]| Damping coefficients [M/m/s] |
|:---------:|:-----------:|:---------------------:|:----------------------------:|
|     1     |  m1 = 2500  |      k1 = 80,000      |           b1 = 350           |
|-----
|     2     |  m2 = 320   |      k2 = 500,000     |           b2 = 15,000        |
{: rules="groups"}

<hr>
### Mathematical Representation of the System and Stability Analysis

* State Space, ordinary differential equation model for the system

<img src="/images/ME121/1-1.jpg" align="middle">

* Equilibria of the active suspension system assuming F and w are zero

<img src="/images/ME121/1-2.jpg" align="middle">

* Stability Test<br/>

<img src="/images/ME121/1-3.jpg" align="middle"><br/>

<cite>Using Matlab</cite><br/>

Given: m1&nbsp;=&nbsp;2,500; m2&nbsp;=&nbsp;320; k1&nbsp;=&nbsp;80,000; k2&nbsp;=&nbsp;500,000; b1&nbsp;=&nbsp;350; b2&nbsp;=&nbsp;15,000;<br/>
A = [0 1 0 0; -&nbsp;k1/m1 -&nbsp;b1/m1 k1/m1 b1/m1; 0 0 0 1; k1/m2 b1/m2 -&nbsp;(k1+k2)/m2 -&nbsp;(b1+b2)/m2];<br/>
B = [0 0 0; 1 0 0; 0 0 0; -&nbsp;1 k2/m2 b2/m2];<br/>

>> >>eig(A)<br/>
ans = <br/>
<u>-23.9446</u> + 35.2083<cite>i</cite><br/>
<u>-23.9446</u> - 35.2083<cite>i</cite><br/>
<u>-0.1098</u> + 5.2504<cite>i</cite><br/>
<u>-0.1098</u> - 5.2504<cite>i</cite><br/>
All the real values of the resulting eigenvalues are negative.  Therefore, it is factual to say the system is stable.

### Laplace/Transfer Function Model for the System
* Take as the system output the difference between the two positions.
<img src="/images/ME121/2-1.jpg" align="middle">

* Calculate the two transfer functions:<br/>
Between the active suspensor input <cite>F</cite> and the output <cite>y</cite>:<br/>
Between the disturbance input <cite>w</cite> and the output <cite>y</cite>:<br/>

[1]<br/><img src="/images/ME121/2-2.jpg" align="middle"><br/>

[2]<br/><img src="/images/ME121/2-3.jpg" align="middle"><br/>

[1] + [2]<br/><img src="/images/ME121/2-4.jpg" align="middle"><br/>

<img src="/images/ME121/2-5.jpg" align="middle"><br/>
<img src="/images/ME121/2-6.jpg" align="middle"><br/>
<img src="/images/ME121/2-7.jpg" align="middle"><br/>
<img src="/images/ME121/2-8.jpg" align="middle"><br/>

### Introduction Feedback/Block Diagrams
<img src="/images/ME121/3-1.jpg" align="middle">
![Block Diagram](/images/ME121/3-1.jpg)
{: .image-middle}

### Bode Plots
<cite>Using Matlab</cite><br/>
s = tf('s');<br/>
G1 = ((m1+m2)*s^2+b2*s+k2)/((m1*s^2+b1*s+k1)*(m2*s^2+(b1+b2)*s+(k1+k2))-(b1*s+k1)*(b1*s+k1));<br/>
G2 = (-m1*b2*s^3-m1*k2*s^2)/((m1*s^2+b1*s+k1)*(m2*s^2+(b1+b2)*s+(k1+k2))-(b1*s+k1)*(b1*s+k1));<br/>
w = logspace(-1,4);<br/>
bode(G1,w)<br/>
<img src="/images/ME121/4-1.jpg" align="middle"><br/>
bode(G2,w)<br/>
<img src="/images/ME121/4-2.jpg" align="middle">

### Root Locus
<cite>Using Matlab</cite><br/>
rlocus(G1)<br/>
<img src="/images/ME121/5-1.jpg" align="middle"><br/>
step(G1)<br/>
<img src="/images/ME121/5-2.jpg" align="middle"><br/>
It is ideal to put a pair of poles and zeros near the imaginary axis to cancel out the poles and zeros currently there.  After the poles and zeros are “cancelled” with the ones we added, it is best to put poles very far to the left to get a faster response, which will reach steady state faster.  Having poles near the Imaginary axis will give a slow response, which makes the system oscillate a lot before reaching steady state.<br/>
>> Dr = -log(0.05)/sqrt(pi^2+log(0.05)^2) %Dr&nbsp;=&nbsp;damping ratio<br/>
Dr = 0.6901<br/>
>> wn = 4.6/(1*Dr) %wn&nbsp;=&nbsp;natural frequency<br/>
wn = 6.6656

### Compensator Design
<img src="/images/ME121/6-1.jpg" align="middle"><br/>
<img src="/images/ME121/6-2.jpg" align="middle"><br/>